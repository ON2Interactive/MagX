<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DarkroomX</title>
    <link rel="icon" type="image/svg+xml" href="/assets/darkroomx-favicon.svg" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="studio-page">
    <div class="app-shell">
      <header class="topbar">
        <div class="topbar-left">
          <a class="topbar-brand-link" href="/" aria-label="DarkroomX Home">
            <img src="/assets/darkroomx-logo-white.svg" alt="DarkroomX" class="topbar-logo" />
          </a>
        </div>
        <div class="topbar-center">
          <div class="zoom-controls">
            <button id="zoomOutBtn" class="icon-btn" type="button" aria-label="Zoom Out" title="Zoom Out">
              <i data-lucide="zoom-out"></i>
            </button>
            <span id="zoomLevel" class="zoom-level">100%</span>
            <button id="zoomInBtn" class="icon-btn" type="button" aria-label="Zoom In" title="Zoom In">
              <i data-lucide="zoom-in"></i>
            </button>
            <button id="zoomResetBtn" class="icon-btn icon-btn-text" type="button" aria-label="Reset Zoom" title="Reset Zoom">
              1:1
            </button>
          </div>
        </div>
        <div class="topbar-right">
          <button id="undoBtn" class="icon-btn" type="button" aria-label="Undo" title="Undo">
            <i data-lucide="undo-2"></i>
          </button>
          <button id="redoBtn" class="icon-btn" type="button" aria-label="Redo" title="Redo">
            <i data-lucide="redo-2"></i>
          </button>
          <button id="loadProjectBtn" class="icon-btn" type="button" aria-label="Load Project" title="Load Project">
            <i data-lucide="folder-open"></i>
          </button>
          <button id="saveProjectBtn" class="icon-btn" type="button" aria-label="Save Project" title="Save Project">
            <i data-lucide="save"></i>
          </button>
          <button id="compareBtn" class="icon-btn icon-btn-text" type="button" aria-label="Compare Original" title="Compare Original">
            <i data-lucide="flip-horizontal-2"></i>
            <span id="compareBtnLabel">Compare</span>
          </button>
          <label class="upload-icon-btn" for="photosInput" aria-label="Upload Photos" title="Upload Photos">
            <i data-lucide="upload"></i>
          </label>
          <button id="exportTopBtn" class="icon-btn icon-btn-export" type="button" aria-label="Export Photo" title="Export Photo">
            <i data-lucide="download"></i>
          </button>
          <button id="creditsBtn" class="icon-btn icon-btn-text credits-btn" type="button" aria-label="Credits" title="Credits">
            <i data-lucide="coins"></i>
            <span id="creditsBtnLabel">Credits: 0</span>
          </button>
          <button id="orderPrintBtn" class="icon-btn icon-btn-text" type="button" aria-label="Order Wallart" title="Order Wallart">
            <i data-lucide="package"></i>
            <span>Order Wallart</span>
          </button>
        </div>
        <input id="photosInput" type="file" multiple accept="image/*" hidden />
        <input id="folderInput" type="file" webkitdirectory directory multiple accept="image/*" hidden />
        <input id="projectInput" type="file" accept=".darkroomx,.json,application/json" hidden />
      </header>

      <main class="workspace">
        <aside class="left-toolbar" aria-label="Tools">
          <button id="toolSelectBtn" type="button" class="tool-btn is-active" aria-label="Selection Arrow" title="Selection Arrow">
            <i data-lucide="mouse-pointer-2"></i>
          </button>
          <button id="toolUploadBtn" type="button" class="tool-btn" aria-label="Upload" title="Upload">
            <i data-lucide="upload"></i>
          </button>
          <button id="toolTextBtn" type="button" class="tool-btn" aria-label="Text" title="Text">
            <i data-lucide="type"></i>
          </button>
          <button id="toolShapesBtn" type="button" class="tool-btn" aria-label="Shapes" title="Shapes">
            <i data-lucide="shapes"></i>
          </button>
          <button id="toolEditBtn" type="button" class="tool-btn" aria-label="Edit Image" title="Edit Image">
            <i data-lucide="pen-square"></i>
          </button>
          <button id="toolGenerateBtn" type="button" class="tool-btn" aria-label="Generate Image" title="Generate Image">
            <i data-lucide="wand-sparkles"></i>
          </button>
          <div id="shapeFlyout" class="shape-flyout hidden-panel" aria-label="Shape Types">
            <button type="button" class="shape-option-btn" data-shape-type="rectangle" title="Rectangle">
              <i data-lucide="square"></i>
            </button>
            <button type="button" class="shape-option-btn" data-shape-type="circle" title="Circle">
              <i data-lucide="circle"></i>
            </button>
            <button type="button" class="shape-option-btn" data-shape-type="triangle" title="Triangle">
              <i data-lucide="triangle"></i>
            </button>
            <button type="button" class="shape-option-btn" data-shape-type="line" title="Line">
              <i data-lucide="minus"></i>
            </button>
            <button type="button" class="shape-option-btn" data-shape-type="star" title="Star">
              <i data-lucide="star"></i>
            </button>
            <button type="button" class="shape-option-btn" data-shape-type="polygon" title="Polygon">
              <i data-lucide="hexagon"></i>
            </button>
          </div>
          <button id="toolPrintBtn" type="button" class="tool-btn tool-btn--bottom" aria-label="Print" title="Print">
            <i data-lucide="printer"></i>
          </button>
        </aside>

        <section class="canvas-panel">
          <div id="emptyState" class="empty-state">
            <div class="empty-state-content">
              <p>Start by uploading photos, uploading a folder, or generating a new image.</p>
              <div class="empty-state-actions">
                <button id="emptyUploadPhotosBtn" type="button">Upload Photos</button>
                <button id="emptyUploadFolderBtn" type="button">Upload Folder</button>
                <button id="emptyGenerateBtn" type="button">Generate Photo</button>
              </div>
            </div>
          </div>
          <div id="previewWrap" class="preview-wrap hidden">
            <img id="mainPreview" alt="Selected photo preview" />
            <div id="overlayLayer" class="overlay-layer"></div>
          </div>
        </section>

        <aside class="inspector-panel">
          <h2>Properties Inspector</h2>

          <details class="inspector-section selection-panel" open>
            <summary>Histogram</summary>
            <div class="section-body">
              <div class="histogram-block">
                <canvas id="histogramCanvas" width="280" height="100"></canvas>
              </div>
            </div>
          </details>

          <details class="inspector-section selection-panel" open>
            <summary>Photo Details</summary>
            <div class="section-body">
              <div id="photoMeta" class="meta-block">
                <p class="meta-empty">Select a photo to inspect details.</p>
              </div>
            </div>
          </details>

          <details class="inspector-section selection-panel" open>
            <summary>Adjustments</summary>
            <div id="controls" class="section-body controls">
              <div class="control-row">
                <label for="exposure">Exposure</label>
                <input id="exposure" type="range" min="-100" max="100" value="0" />
                <span id="exposureVal">0</span>
              </div>
              <div class="control-row">
                <label for="contrast">Contrast</label>
                <input id="contrast" type="range" min="-100" max="100" value="0" />
                <span id="contrastVal">0</span>
              </div>
              <div class="control-row">
                <label for="saturation">Saturation</label>
                <input id="saturation" type="range" min="-100" max="100" value="0" />
                <span id="saturationVal">0</span>
              </div>
              <div class="control-row">
                <label for="temperature">Temperature</label>
                <input id="temperature" type="range" min="-100" max="100" value="0" />
                <span id="temperatureVal">0</span>
              </div>
              <div class="control-row">
                <label for="tint">Tint</label>
                <input id="tint" type="range" min="-100" max="100" value="0" />
                <span id="tintVal">0</span>
              </div>
              <button id="resetBtn" type="button">Reset Adjustments</button>
            </div>
          </details>

          <details class="inspector-section selection-panel" open>
            <summary>Film Looks</summary>
            <div class="section-body controls">
              <div class="control-row text-control-row">
                <label for="filmLookSelect">Look</label>
                <select id="filmLookSelect"></select>
              </div>
              <div class="control-row">
                <label for="filmLookStrength">Strength</label>
                <input id="filmLookStrength" type="range" min="0" max="100" value="100" />
                <span id="filmLookStrengthVal">100</span>
              </div>
              <button id="filmLookResetBtn" type="button">Reset Look</button>
            </div>
          </details>

          <details class="inspector-section selection-panel" open>
            <summary>Transform</summary>
            <div class="section-body">
              <div class="rotate-row">
                <span class="rotate-label">Rotate</span>
                <div class="rotate-actions">
                  <button id="rotateLeftBtn" type="button">Left 90</button>
                  <button id="rotateRightBtn" type="button">Right 90</button>
                  <button id="resetRotationBtn" type="button">Reset</button>
                </div>
              </div>
            </div>
          </details>

          <details id="textPropertiesPanel" class="inspector-section selection-panel hidden-panel" open>
            <summary>Text</summary>
            <div class="section-body controls">
              <div class="control-row text-control-row">
                <label for="textFontFamily">Font</label>
                <select id="textFontFamily">
                  <option value="Helvetica, Arial, sans-serif">Helvetica</option>
                  <option value="Arial, sans-serif">Arial</option>
                  <option value="Verdana, sans-serif">Verdana</option>
                  <option value="'Times New Roman', serif">Times New Roman</option>
                  <option value="Georgia, serif">Georgia</option>
                  <option value="'Courier New', monospace">Courier New</option>
                </select>
              </div>
              <div class="control-row text-control-row">
                <label for="textFontWeight">Weight</label>
                <select id="textFontWeight">
                  <option value="300">Light</option>
                  <option value="400">Regular</option>
                  <option value="500">Medium</option>
                  <option value="600">Semibold</option>
                  <option value="700">Bold</option>
                </select>
              </div>
              <div class="control-row text-control-row">
                <label for="textFontStyle">Style</label>
                <select id="textFontStyle">
                  <option value="normal">Normal</option>
                  <option value="italic">Italic</option>
                </select>
              </div>
              <div class="control-row text-control-row">
                <label for="textAlign">Align</label>
                <select id="textAlign">
                  <option value="left">Left</option>
                  <option value="center">Center</option>
                  <option value="right">Right</option>
                </select>
              </div>
              <div class="control-row">
                <label for="textFontSize">Size</label>
                <input id="textFontSize" type="range" min="12" max="160" value="36" />
                <span id="textFontSizeVal">36</span>
              </div>
              <div class="control-row">
                <label for="textLetterSpacing">Letter Space</label>
                <input id="textLetterSpacing" type="range" min="-5" max="40" value="0" />
                <span id="textLetterSpacingVal">0</span>
              </div>
              <div class="control-row">
                <label for="textWordSpacing">Word Space</label>
                <input id="textWordSpacing" type="range" min="-10" max="80" value="0" />
                <span id="textWordSpacingVal">0</span>
              </div>
              <div class="control-row">
                <label for="textLineHeight">Line Space</label>
                <input id="textLineHeight" type="range" min="80" max="300" value="120" />
                <span id="textLineHeightVal">1.20</span>
              </div>
              <div class="control-row">
                <label for="textRotation">Rotation</label>
                <input id="textRotation" type="range" min="-180" max="180" value="0" />
                <span id="textRotationVal">0</span>
              </div>
              <div class="control-row">
                <label for="textOpacity">Opacity</label>
                <input id="textOpacity" type="range" min="10" max="100" value="100" />
                <span id="textOpacityVal">100</span>
              </div>
              <div class="control-row text-control-row">
                <label for="textColor">Color</label>
                <input id="textColor" type="color" value="#ffffff" />
              </div>
            </div>
          </details>

          <details id="shapePropertiesPanel" class="inspector-section selection-panel hidden-panel" open>
            <summary>Shape</summary>
            <div class="section-body controls">
              <div class="control-row text-control-row">
                <label for="shapeFillColor">Fill</label>
                <input id="shapeFillColor" type="color" value="#ffffff" />
              </div>
              <div class="control-row text-control-row">
                <label for="shapeStrokeColor">Stroke</label>
                <input id="shapeStrokeColor" type="color" value="#111111" />
              </div>
              <div class="control-row">
                <label for="shapeStrokeWidth">Stroke Width</label>
                <input id="shapeStrokeWidth" type="range" min="0" max="30" value="0" />
                <span id="shapeStrokeWidthVal">0</span>
              </div>
              <div class="control-row">
                <label for="shapeBorderRadius">Radius</label>
                <input id="shapeBorderRadius" type="range" min="0" max="60" value="0" />
                <span id="shapeBorderRadiusVal">0</span>
              </div>
              <div class="control-row">
                <label for="shapeOpacity">Opacity</label>
                <input id="shapeOpacity" type="range" min="10" max="100" value="100" />
                <span id="shapeOpacityVal">100</span>
              </div>
              <div class="control-row">
                <label for="shapeRotation">Rotation</label>
                <input id="shapeRotation" type="range" min="-180" max="180" value="0" />
                <span id="shapeRotationVal">0</span>
              </div>
              <div id="shapeSidesRow" class="control-row hidden-panel">
                <label for="shapeSides">Sides</label>
                <input id="shapeSides" type="range" min="3" max="12" value="5" />
                <span id="shapeSidesVal">5</span>
              </div>
            </div>
          </details>

          <details class="inspector-section selection-panel" open>
            <summary>Layers</summary>
            <div class="section-body">
              <div id="layersPanelList" class="layers-panel-list"></div>
            </div>
          </details>

        </aside>
      </main>

      <footer class="filmstrip-panel">
        <div id="filmstripHandle" class="filmstrip-handle" title="Resize Filmstrip" aria-label="Resize Filmstrip"></div>
        <div class="filmstrip-body">
          <div class="filmstrip-actions">
            <button id="filmstripSelectAllBtn" type="button">Select All</button>
            <button id="filmstripClearSelectionBtn" type="button">Clear Selection</button>
          </div>
          <div id="filmstrip" class="filmstrip"></div>
        </div>
      </footer>
    </div>

    <div id="editModal" class="modal-backdrop hidden-panel" role="dialog" aria-modal="true" aria-label="Edit Image">
      <div class="modal-card">
        <div class="modal-header">
          <h3>AI Edit</h3>
          <button id="editModalCloseBtn" class="icon-btn" type="button" aria-label="Close Edit Modal">
            <i data-lucide="x"></i>
          </button>
        </div>
        <div class="modal-body">
          <img id="editModalThumb" class="modal-thumb" alt="Selected image thumbnail" />
          <div id="editModalStrip" class="modal-thumb-strip hidden-panel" aria-label="Selected photos for batch edit"></div>
          <label class="modal-label" for="editPromptInput">Prompt</label>
          <textarea id="editPromptInput" class="modal-input" placeholder="Describe the edit you want..."></textarea>
          <p id="editModalStatus" class="modal-status"></p>
        </div>
        <div class="modal-footer">
          <button id="editCancelBtn" class="icon-btn modal-action-btn" type="button" aria-label="Cancel Edit" title="Cancel Edit">
            <i data-lucide="x"></i>
          </button>
          <button id="editSubmitBtn" class="icon-btn modal-action-btn" type="button" aria-label="Apply Edit" title="Apply Edit">
            <i data-lucide="rotate-cw"></i>
          </button>
        </div>
      </div>
    </div>

    <div id="generateModal" class="modal-backdrop hidden-panel" role="dialog" aria-modal="true" aria-label="Generate Image">
      <div class="modal-card">
        <div class="modal-header">
          <h3>Generate AI</h3>
          <button id="generateModalCloseBtn" class="icon-btn" type="button" aria-label="Close Generate Modal">
            <i data-lucide="x"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="control-row text-control-row">
            <label for="generateResolutionSelect">Resolution</label>
            <select id="generateResolutionSelect">
              <option value="1K">1K</option>
              <option value="2K">2K</option>
              <option value="4K">4K</option>
            </select>
          </div>
          <div class="control-row text-control-row">
            <label for="generateAspectRatioSelect">Aspect Ratio</label>
            <select id="generateAspectRatioSelect">
              <option value="1:1">1:1</option>
              <option value="2:3">2:3</option>
              <option value="3:2">3:2</option>
              <option value="3:4">3:4</option>
              <option value="4:3">4:3</option>
              <option value="4:5">4:5</option>
              <option value="5:4">5:4</option>
              <option value="16:9">16:9</option>
              <option value="9:16">9:16</option>
              <option value="21:9">21:9</option>
            </select>
          </div>
          <label class="modal-label" for="generatePromptInput">Prompt</label>
          <textarea id="generatePromptInput" class="modal-input" placeholder="Describe the image you want..."></textarea>
          <p id="generateModalStatus" class="modal-status"></p>
        </div>
        <div class="modal-footer">
          <button id="generateCancelBtn" class="icon-btn modal-action-btn" type="button" aria-label="Cancel Generate" title="Cancel Generate">
            <i data-lucide="x"></i>
          </button>
          <button id="generateSubmitBtn" class="icon-btn modal-action-btn" type="button" aria-label="Generate Image" title="Generate Image">
            <i data-lucide="rotate-cw"></i>
          </button>
        </div>
      </div>
    </div>

    <div id="printModal" class="modal-backdrop hidden-panel" role="dialog" aria-modal="true" aria-label="Peecho Print">
      <div class="modal-card">
        <div class="modal-header">
          <h3>Order Wallart</h3>
          <button id="printModalCloseBtn" class="icon-btn" type="button" aria-label="Close Print Modal">
            <i data-lucide="x"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="modal-grid-two">
            <div class="control-row text-control-row">
              <label for="printOfferingSelect">Framed Product</label>
              <select id="printOfferingSelect"></select>
            </div>
            <div class="control-row text-control-row">
              <label for="printQuantityInput">Quantity</label>
              <input id="printQuantityInput" type="number" min="1" max="20" value="1" />
            </div>
          </div>
          <div class="modal-grid-two">
            <div class="control-row text-control-row">
              <label for="printCurrencyInput">Currency</label>
              <input id="printCurrencyInput" type="text" value="USD" maxlength="3" />
            </div>
            <div class="control-row text-control-row">
              <label for="printEmailInput">Email</label>
              <input id="printEmailInput" type="email" placeholder="you@example.com" />
            </div>
          </div>
          <div class="control-row text-control-row">
            <label for="printFullNameInput">Full Name</label>
            <input id="printFullNameInput" type="text" placeholder="Recipient name" />
          </div>
          <div class="control-row text-control-row">
            <label for="printAddress1Input">Address Line 1</label>
            <input id="printAddress1Input" type="text" placeholder="Street and number" />
          </div>
          <div class="control-row text-control-row">
            <label for="printAddress2Input">Address Line 2</label>
            <input id="printAddress2Input" type="text" placeholder="Apartment, suite, etc. (optional)" />
          </div>
          <div class="modal-grid-two">
            <div class="control-row text-control-row">
              <label for="printCityInput">City</label>
              <input id="printCityInput" type="text" />
            </div>
            <div class="control-row text-control-row">
              <label for="printStateInput">State/Region</label>
              <input id="printStateInput" type="text" />
            </div>
          </div>
          <div class="modal-grid-two">
            <div class="control-row text-control-row">
              <label for="printPostalInput">Postal Code</label>
              <input id="printPostalInput" type="text" />
            </div>
            <div class="control-row text-control-row">
              <label for="printCountryInput">Country Code</label>
              <input id="printCountryInput" type="text" value="US" maxlength="2" />
            </div>
          </div>
          <p id="printModalStatus" class="modal-status"></p>
        </div>
        <div class="modal-footer">
          <button id="printCancelBtn" class="icon-btn modal-action-btn" type="button" aria-label="Cancel Print" title="Cancel Print">
            <i data-lucide="x"></i>
          </button>
          <button id="printSubmitBtn" class="icon-btn modal-action-btn" type="button" aria-label="Submit Print Order" title="Submit Print Order">
            <i data-lucide="send"></i>
          </button>
        </div>
      </div>
    </div>

    <div id="editProcessingOverlay" class="processing-overlay hidden-panel" aria-live="polite">
      <div class="processing-card">
        <i data-lucide="loader-circle" class="processing-icon"></i>
        <p id="editProcessingStatus">Applying AI edit...</p>
      </div>
    </div>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="app.js"></script>
  </body>
</html>
